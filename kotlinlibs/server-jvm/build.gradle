apply from: "$rootDir/gradle/kotlin-jvm-lib.gradle"
apply plugin: "org.springframework.boot"
apply plugin: "io.spring.dependency-management"
apply plugin: "kotlin-spring"
apply plugin: "kotlin-allopen"
apply plugin: "kotlin-kapt" // Kotlin Annotation Processor
apply plugin: 'com.github.johnrengelman.shadow'

dependencies {
    kapt Spring.boot.configurationProcessor

    implementation project(":framework:test")
    implementation project(":kotlinlibs:common")
    implementation project(":kotlinlibs:spring-common")

    implementation "com.fasterxml.jackson.module:jackson-module-kotlin:_"
    implementation "org.jetbrains.kotlin:kotlin-reflect:_"
    implementation KotlinX.datetime
    implementation KotlinX.serialization.json
    implementation "com.rometools:rome:_"
    implementation "org.springframework.data:spring-data-commons:_"
    implementation Spring.boot.web

    runtimeOnly Spring.boot.devTools

    testImplementation Spring.boot.test
    testImplementation "com.ninja-squad:springmockk:_"
}

allOpen {
    annotation("javax.persistence.Entity")
    annotation("javax.persistence.Embeddable")
    annotation("javax.persistence.MappedSuperclass")
}

test {
    useJUnitPlatform()
}

releaseJvm {
    dependsOn 'shadowJar'
}

registerDependency(":framework:test")
registerDependency(":kotlinlibs:common")
registerDependency(":kotlinlibs:spring-common")
