buildscript {
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath packages.AndroidBuildGradle
        classpath packages.KotlinGradle
        classpath packages.AndroidXNavigationSafeArgsGradle
    }
}

apply plugin: "com.android.application"
apply from: "$rootDir/gradle/app.gradle"

android {
    defaultConfig {
        applicationId "com.cesarandres.ps2link"
        versionName "5.4.0"
    }
}

dependencies {
    implementation project(":framework")

    implementation packages.Volley
    implementation packages.Gson
    implementation packages.PrettyTime
    implementation packages.Twitter4J
    implementation packages.AndroidXAppCompat
    implementation packages.EspressoIdlingResource

    implementation packages.KotlinStdJdk8
    implementation packages.CoroutinesCore
    implementation packages.CoroutinesAndroid

    implementation packages.Kodein
    implementation packages.KodeinAndroid

    implementation packages.AppCenterSdk

    testImplementation packages.JUnit

    androidTestImplementation packages.AndroidXJUnit
    androidTestImplementation packages.AndroidXJUnitKtx
    androidTestImplementation packages.AndroidXTest
    androidTestImplementation packages.AndroidXTestRules
    androidTestImplementation packages.AndroidXTestRunner
    androidTestImplementation packages.EspressoIntents
    androidTestImplementation packages.Espresso
    androidTestImplementation packages.UIAutomator
    androidTestImplementation packages.AppCenterEspressoTestExt
}

tasks.register("release") {
    group = 'build'
    description = 'Run all the steps to build a release artifact'

    dependsOn ':framework:release'
    dependsOn 'ktlint'
    dependsOn 'build'
    dependsOn 'test'
    dependsOn 'assembleAndroidTest'
}