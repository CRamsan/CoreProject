buildscript {
    repositories {
        google()

        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath packages.KotlinGradle
        classpath packages.AzureFunctionsGradle
    }
}

apply plugin: "com.microsoft.azure.azurefunctions"
apply from: "$rootDir/gradle/kotlin-jvm-lib.gradle"

repositories {
    maven {
        url "https://kotlin.bintray.com/kotlinx/"
    }
}

group = 'com.cramsan.petproject.azurefunction'
version = '0.0.1-SNAPSHOT'

dependencies {
    implementation project(":petproject:appcore")
    implementation project(":framework")

    implementation packages.AzureFunctionsJavaLibrary
    implementation packages.Gson
    implementation packages.JacksonDatabinding
}

azurefunctions {
    resourceGroup = 'PetProject'
    appName = 'petproject-api'
    pricingTier = 'Consumption'
    region = 'centralus'
    runtime {
      os = 'windows'
    }    
    localDebug = "transport=dt_socket,server=y,suspend=n,address=5005"
}

registerDependency(":petproject:appcore")
release {
    dependsOn 'azureFunctionsPackageZip'
}