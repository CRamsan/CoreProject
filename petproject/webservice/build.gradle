plugins {
    id "org.springframework.boot" version "$globalSpringFrameworkVersion"
    id "io.spring.dependency-management" version "$globalSpringDependencyManagement"
    id "org.jetbrains.kotlin.jvm"
    id "org.jetbrains.kotlin.plugin.spring"
    id "org.jetbrains.kotlin.plugin.jpa"
    id 'war'
}

group = 'com.cramsan.petproject.webservice'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = globalJavaCompatibility
targetCompatibility = globalJavaCompatibility

repositories {
    mavenCentral()
}

dependencies {
    implementation project(":petproject:appcore")
    implementation project(":framework")

    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$globalKotlinVersion"

    implementation "org.springframework.boot:spring-boot-devtools"
    implementation "org.springframework.boot:spring-boot-starter"
    implementation "org.springframework.boot:spring-boot-starter-thymeleaf"
    implementation "org.springframework.boot:spring-boot-starter-web"

    providedRuntime "org.springframework.boot:spring-boot-starter-tomcat"

    testImplementation "org.springframework.boot:spring-boot-starter-test"
}

bootWar {
    providedClasspath("src/main/resources/PetProject.sql")
}

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
    kotlinOptions {
        freeCompilerArgs = ["-Xjsr305=strict"]
        jvmTarget = globalJavaCompatibility
    }
}

build.finalizedBy ktlint
